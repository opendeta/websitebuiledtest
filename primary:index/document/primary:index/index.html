<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Art Pro üõ°Ô∏è Smart-Translate Fixed</title>
    <style>
        :root { --primary: #00f2ff; --accent: #7000ff; --bg: #050508; --card-bg: #11111a; }
        * { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: var(--bg); color: #fff; margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        header { padding: 15px; text-align: center; background: rgba(18, 18, 26, 0.95); border-bottom: 1px solid #222; }
        header h1 { margin: 0; font-size: 20px; background: linear-gradient(to right, var(--primary), var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        #gallery { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 20px; align-items: center; }
        
        .card { background: var(--card-bg); border: 1px solid #2a2a35; border-radius: 18px; padding: 12px; width: 100%; max-width: 500px; position: relative; animation: slideIn 0.5s ease; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .img-result { width: 100%; border-radius: 12px; margin-top: 10px; background: #1a1a24; border: 1px solid #333; transition: 0.3s; }
        
        .del-btn { position: absolute; top: -8px; right: -8px; background: #ff3b3b; color: #fff; border: 2px solid var(--bg); width: 30px; height: 30px; border-radius: 50%; cursor: pointer; font-weight: bold; z-index: 10; }

        #bottom-panel { background: #11111a; padding: 15px; border-top: 1px solid #333; }
        #status-bar { text-align: center; color: var(--primary); font-size: 13px; margin-bottom: 10px; font-weight: bold; min-height: 20px; }

        .input-panel { display: flex; gap: 10px; }
        input#prompt-input { flex: 1; padding: 14px; background: #1c1c27; border: 1px solid #333; color: #fff; border-radius: 12px; outline: none; font-size: 16px; }
        
        button#generate { 
            background: var(--primary); color: #000; border: none; padding: 0 25px; 
            border-radius: 12px; font-weight: bold; cursor: pointer; min-width: 140px;
        }

        button#generate:disabled { background: #1a1a1a; color: #555; cursor: not-allowed; }
        .timer-active { color: #ff3b3b !important; }
    </style>
</head>
<body>

<header><h1>AI Art Pro ‚ö° Google-Smart</h1></header>

<div id="gallery">
    <div id="placeholder" style="text-align:center; color:#444; margin-top:50px;">
        <p>üõ°Ô∏è Google-Translation + ‡ßØ‡ß¶ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá‡¶∞ ‡¶∏‡ßÅ‡¶∞‡¶ï‡ßç‡¶∑‡¶æ ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡ßü‡•§<br>‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶≠‡¶æ‡¶∑‡¶æ‡ßü ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®, ‡¶∞‡ßá‡¶ú‡¶æ‡¶≤‡ßç‡¶ü ‡¶π‡¶¨‡ßá ‡¶Ü‡¶∏‡¶≤‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã!</p>
    </div>
</div>

<div id="bottom-panel">
    <div id="status-bar">‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶∞‡ßá‡¶°‡¶ø...</div>
    <div class="input-panel">
        <input type="text" id="prompt-input" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶≠‡¶æ‡¶∑‡¶æ‡ßü ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..." autocomplete="off">
        <button id="generate" onclick="createArt()">‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
    </div>
</div>

<script>
    let blobCache = new Set();

    function setStatus(msg, isWarning = false) {
        const bar = document.getElementById('status-bar');
        bar.innerText = msg;
        bar.className = isWarning ? 'timer-active' : '';
    }

    // üåê ‡¶®‡¶§‡ßÅ‡¶® ‡¶∂‡¶ï‡ßç‡¶§‡¶ø‡¶∂‡¶æ‡¶≤‡ßÄ ‡¶ó‡ßÅ‡¶ó‡¶≤ ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶≤‡ßá‡¶∂‡¶® ‡¶á‡¶û‡ßç‡¶ú‡¶ø‡¶®
    async function translateText(text) {
        try {
            const url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=en&dt=t&q=${encodeURIComponent(text)}`;
            const response = await fetch(url);
            const data = await response.json();
            // ‡¶ó‡ßÅ‡¶ó‡¶≤ ‡¶•‡ßá‡¶ï‡ßá ‡¶Ü‡¶∏‡¶æ ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶≤‡ßá‡¶ü‡ßá‡¶° ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶∞‡¶ø‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶ï‡¶∞‡¶¨‡ßá
            return data[0][0][0];
        } catch (error) {
            console.error("Translation Error:", error);
            return text; // ‡¶ï‡ßã‡¶®‡ßã‡¶≠‡¶æ‡¶¨‡ßá ‡¶è‡¶∞‡¶∞ ‡¶π‡¶≤‡ßá ‡¶Æ‡ßÇ‡¶≤ ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü‡¶á ‡¶™‡¶æ‡¶†‡¶æ‡¶¨‡ßá
        }
    }

    async function createArt() {
        const input = document.getElementById('prompt-input');
        const btn = document.getElementById('generate');
        const promptRaw = input.value.trim();

        if (!promptRaw) {
            alert("‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶è‡¶ï‡¶ü‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶® ‡¶¨‡¶∏!");
            return;
        }

        btn.disabled = true;
        input.disabled = true;
        document.getElementById('placeholder').style.display = 'none';
        
        // ‡ßß. ‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶ ‡¶ß‡¶æ‡¶™ (Smartest Engine)
        setStatus("üåê ‡¶ó‡ßÅ‡¶ó‡¶≤ ‡¶á‡¶û‡ßç‡¶ú‡¶ø‡¶® ‡¶¶‡ßç‡¶¨‡¶æ‡¶∞‡¶æ ‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...");
        const translatedText = await translateText(promptRaw);
        
        // ‡ß®. ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞‡¶ø‡¶Ç ‡¶ß‡¶æ‡¶™
        setStatus("üöÄ ‡¶è‡¶Ü‡¶á ‡¶õ‡¶¨‡¶ø ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶õ‡ßá... ‡ßØ‡ß¶ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá‡¶∞ ‡¶∏‡ßÅ‡¶∞‡¶ï‡ßç‡¶∑‡¶æ ‡¶∂‡ßÅ‡¶∞‡ßÅ‡•§");

        // ‡¶Ü‡¶∏‡¶≤‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ú‡¶ø‡¶ï ‡¶ï‡¶ø‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°
        const magicBoost = ", professional photography, raw photo, hyper-realistic, 8k uhd, cinematic lighting, sharp focus, masterpiece, highly detailed, realistic texture";
        const finalPrompt = `Subject: ${translatedText}. Style: ${magicBoost}`;

        const seed = Math.floor(Math.random() * 2000000000);
        const uniqueID = Date.now() + Math.random().toString(36).substring(7);
        
        // FLUX ‡¶Æ‡¶°‡ßá‡¶≤ ‡¶è‡¶¨‡¶Ç ‡ßß‡ß¶‡ß®‡ß™ ‡¶∞‡ßá‡¶ú‡ßã‡¶≤‡¶ø‡¶â‡¶∂‡¶®
        const url = `https://image.pollinations.ai/prompt/${encodeURIComponent(finalPrompt)}?width=1024&height=1024&seed=${seed}&model=flux&nologo=true&enhance=true&v=${uniqueID}`;

        const img = new Image();
        img.src = url;

        img.onload = () => {
            const cardId = 'art_' + Date.now();
            const card = document.createElement('div');
            card.className = 'card';
            card.id = cardId;
            card.innerHTML = `
                <button class="del-btn" onclick="purgeImage('${cardId}')">√ó</button>
                <div style="font-size:11px; color:#555; margin-bottom:5px;">Original: "${promptRaw}" <br> Translated: "${translatedText}"</div>
                <img src="${url}" class="img-result" id="img_${cardId}">
                <button onclick="downloadAndTrack('${url}')" style="width:100%; margin-top:10px; padding:10px; border-radius:8px; border:none; background:linear-gradient(45deg, #222, #111); color:#00f2ff; cursor:pointer; font-weight:bold; font-size:12px;">‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° (HD)</button>
            `;
            document.getElementById('gallery').prepend(card);
            startUltraTimer(90);
        };

        img.onerror = () => {
            alert("‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶ú‡ßç‡¶Ø‡¶æ‡¶Æ! ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
            resetUI();
        };
    }

    function startUltraTimer(seconds) {
        const btn = document.getElementById('generate');
        const input = document.getElementById('prompt-input');
        let timeLeft = seconds;
        input.value = "";

        const countdown = setInterval(() => {
            btn.innerText = `‡¶≤‡¶ï‡¶° (${timeLeft}s)`;
            
            if(timeLeft > 70) setStatus("üßπ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶Æ‡ßá‡¶Æ‡ßã‡¶∞‡¶ø ‡¶™‡¶∞‡¶ø‡¶∑‡ßç‡¶ï‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...", true);
            else if (timeLeft > 40) setStatus("üõ°Ô∏è ‡¶Ü‡¶á‡¶™‡¶ø ‡¶∏‡ßÅ‡¶∞‡¶ï‡ßç‡¶∑‡¶æ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...", true);
            else if (timeLeft > 15) setStatus("‚ôªÔ∏è ‡¶á‡¶Æ‡ßá‡¶ú ‡¶¨‡¶æ‡¶´‡¶æ‡¶∞ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶π‡¶ö‡ßç‡¶õ‡ßá...", true);
            else setStatus("‚ö° ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶™‡ßç‡¶∞‡¶Æ‡ßç‡¶™‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§...", false);
            
            timeLeft--;

            if (timeLeft < 0) {
                clearInterval(countdown);
                resetUI();
            }
        }, 1000);
    }

    function resetUI() {
        const btn = document.getElementById('generate');
        const input = document.getElementById('prompt-input');
        btn.disabled = false;
        input.disabled = false;
        btn.innerText = "‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®";
        setStatus("‚úÖ ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶∞‡ßá‡¶°‡¶ø! ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶≠‡¶æ‡¶∑‡¶æ‡ßü ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®‡•§");
        input.focus();
    }

    function purgeImage(cardId) {
        const card = document.getElementById(cardId);
        const img = document.getElementById('img_' + cardId);
        if (img) img.src = ""; 
        if (card) {
            card.style.transform = "scale(0.8)";
            card.style.opacity = "0";
            setTimeout(() => card.remove(), 400);
        }
        blobCache.forEach(u => URL.revokeObjectURL(u));
        blobCache.clear();
    }

    async function downloadAndTrack(url) {
        try {
            const res = await fetch(url);
            const blob = await res.blob();
            const bUrl = URL.createObjectURL(blob);
            blobCache.add(bUrl);
            const a = document.createElement('a');
            a.href = bUrl;
            a.download = `AI_Smart_HD_${Date.now()}.jpg`;
            a.click();
        } catch (e) {
            alert("‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶´‡ßá‡¶á‡¶≤ ‡¶π‡¶≤‡ßá ‡¶õ‡¶¨‡¶ø‡¶§‡ßá ‡¶≤‡¶Ç-‡¶™‡ßç‡¶∞‡ßá‡¶∏ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
        }
    }

    document.getElementById('prompt-input').addEventListener("keypress", (e) => {
        if (e.key === "Enter" && !document.getElementById('generate').disabled) createArt();
    });
</script>
</body>
</html>